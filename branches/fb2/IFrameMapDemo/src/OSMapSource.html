<html xmlns="http://www.w3.org/1999/xhtml">
	<!--
	 * Portions of this were inspired by the work of pythonmoo here:
	 *
	 * http://ge.pythonmoo.co.uk/blog/
	 *
	 * The original demo is here: http://ge.pythonmoo.co.uk/maps/openlayers1.htm
	 *
	 * NOTE: This uses the nightly build of OpenLayers which adds support for Projections.
	 *       The build I loaded is as of 1st Apr 2008.
	 * (c) (except where otherwise noted) Alistair Rutherford, www.netthreads.co.uk
	-->
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	
		<script type="text/javascript" src="bridge/OpenLayers.js"></script>
 		<script type="text/javascript" src="http://openstreetmap.org/openlayers/OpenStreetMap.js"></script>
	
		<script type="text/javascript" src="bridge/MapClient.js"></script>
		<script type="text/javascript" src="bridge/MapOSController.js"></script>
		  
		<style type="text/css">
            #map {
                width: 100%;
                height: 100%;
                border: 1px solid black;
            }
	        #attr {
	            z-index: 5000;
	            position: absolute;
	            right: 1em;
	            bottom: 1em;
	        }
            
        </style>
		  
		<script type="text/javascript">
		  
			// ----------------------------
	
			var client = null;
			var controller = null;
			var map = null;
	
			// ----------------------------
			
			function setup()
			{
			    controller = new MapOSController(map);
			    client = new MapClient(parent, controller);
			    client.init();
			    
			    // Hyde Park (no particular reason)
			    controller.centerOn(51.507301330566406, -0.16964399814605713);
			}
	
			// ----------------------------
		  
		    // pythonmoo
	        var llproj = new OpenLayers.Projection("EPSG:4326");
	        var googproj = new OpenLayers.Projection("EPSG:900913");
		  
			function init()
			{
			    // taken from pythonmoo demo.
				// Map
	            var options = {
	              projection: googproj,
	              displayProjection: llproj,
	              units: "m",
	              maxResolution: 156543,
	              maxExtent: new OpenLayers.Bounds(-20037508, -20037508, 20037508, 20037508),
	              numZoomLevels: 19,
	              controls: []
	            };
	            
	            map = new OpenLayers.Map('map', options);

				// Layers
				
				var mapnik = new OpenLayers.Layer.OSM.Mapnik("Mapnik");

			  	map.addLayers([mapnik]);

	            var oam = new OpenLayers.Layer.WMS("Open Aerial Map", "http://openaerialmap.org/wms/", {layers: 'world'});
	        			  
			  	map.addLayers([oam]);
			  
			  	map.addControl(new OpenLayers.Control.Navigation());
			  	map.addControl(new OpenLayers.Control.PanZoomBar());
			  	map.addControl(new OpenLayers.Control.LayerSwitcher());
			  	map.addControl(new OpenLayers.Control.Attribution({div: OpenLayers.Util.getElement('attr')}));
			  	map.zoomTo(12);
			  	
				setup();	
			}
		        
		</script>

	</head>
	
	<body onload="init()">
	  <div id="map"></div>
	  <div id="attr"></div>
	</body>

</html>
